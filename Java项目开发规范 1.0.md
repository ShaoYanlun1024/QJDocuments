# java 项目 开发规范 1.0

---

## 目录
- [一、编码字符集规范](#一、编码字符集规范)
- [二、命名风格](#二、命名风格)
- [三、包命名](#三、包命名)
- [四、路由规则](#四、路由规则)
- [五、OOP规范](#五、OOP规范)
- [六、注释规范](#六、注释规范)
- [七、测试接口文档规范](#七、测试接口文档规范)
- [八、其他说明](#八、其他说明)

---

## 一、编码字符集规范
- **源程序代码必须使用 `UTF-8` 无bom头的字符集**

>>>[**<p align="right">>>返回目录<<</p>**](#目录)

## 二、命名风格
1. `禁止`使用`英文和拼音混合`的方式命名，`必须使用英文`。
2. `禁止使用缩写`，除非该缩写是**约定俗成**的。缩写部分全部大写。
3. `包名`统一使用`小写`。
4. `方法名，参数名，变量名`使用 `lowerCamelCase` 风格。
5. `常量和枚举`使用 `CAMEL_CASE` 风格。`枚举类`使用 `Enum` 结尾。
6. `类和接口`使用 `UpperCamelCase` 风格。
7. `抽象类`命名使用 `Abstract` 或 `Base` 开头；
8. `异常类`命名使用 `Exception` 结尾；
9. `接口`命名：DAO层接口 `Repository` 结尾；其他接口 使用 <font color=red size=4>**I**</font> （大写字母 i）开头；
10. `测试类`命名以它要测试的类的名称开始，以 `Test` 结尾。
11. `数组`类型`中括号`要放在`类型后面`，而不是变量名后面。
12. 如果使用到了**设计模式**，建议在类名中**体现出具体模式**，有利于阅读者快速理解架构设计思想。
```java
/*示例：
  java
  IOStream ioStream = new IOStream();
*/
```

>>>[**<p align="right">>>返回目录<<</p>**](#目录)

## 三、包命名
**包命名：全部小写**
1. 业务类：business包，公共类：common包，设置类：config包，过滤器类：filter包，拦截器类：interceptor包，工具类：util包
2. business包内按照具体业务领域分包，如：财务对账类，财务收款类，外网房源类，外网网站维护类，外网字典类
2. 业务控制层：controller包，内的文件以 Controller 结尾
3. 业务服务层：service包，内建包个数建议与controller对应，名字取controller模块名，实现类放入impl包
4. DAO层：repository包，内的文件以Repository结尾只放jpa接口类
```java
/*
  com.allqj.front.business.maintenance.controller
  公司网址(allqj.com)倒写.微服务名(外网前台).业务类.维护类(外网网站维护类).控制层
  com.allqj.finance.business.receipts.controller
  公司网址(allqj.com)倒写.财务系统.业务类.财务收款.控制层
*/
```

>>>[**<p align="right">>>返回目录<<</p>**](#目录)

## 四、路由规则
**路由规则（四层结构）：微服务名/业务领域名/业务内模块/增删改查**
```java
/*
  front/maintenance/article/articlelist
  外网前台/维护类/文章维护/查询list
*/
```

>>>[**<p align="right">>>返回目录<<</p>**](#目录)

## 五、OOP规范
1. 重写方法必须添加 `@Override` 注解。
2. 过时的类和方法必须添加 `@Deprecated` 注解，并说明原因。
3. **禁止**使用已过时的类和方法。
4. 相同参数类型，相同业务含义，才可以使用 `Java` 的可变参数，避免使用 `Object`。
5. 所有的相同类型的包装类对象之间值的比较，必须使用 `equals` 方法比较。
```java
/*
  对于 Integer var = ?  在-128 至 127 范围内的赋值，
  Integer 对象是在 IntegerCache.cache 产生，
  会复用已有对象，这个区间内的 Integer 值可以直接使用==进行判断，
  但是这个区间之外的所有数据，
  都会在堆上产生，并不会复用已有对象，这是一个大坑，
  推荐使用 equals 方法进行判断。

  Object 的 equals 方法容易抛空指针异常，应使用常量或确定有值的对象来调用 equals。

  "test".equals(object);
  //下面这种方式可能会抛出空指针异常。
  object.equals("test");
*/
```
6. 所有的 `POJO` 类属性必须使用包装数据类型。
```java
/*
  POJO 类属性没有初值是提醒使用者在需要使用时，必须自己显式地进行赋值，任何 NPE 问题，或者入库检查，都由使用者来保证。
*/
```
7. 类成员与方法访问控制从严：
    1. 如果不允许外部直接通过 new 来创建对象，那么构造方法必须是 `private`。
    2. 工具类不允许有 `public` 或 `default` 构造方法。
    3. 类非 static 成员变量并且与子类共享，必须是 `protected`。
    4. 类非 static 成员变量并且仅在本类使用，必须是 `private`。
    5. 类 static 成员变量如果仅在本类使用，必须是 `private`。
    6. 若是 static 成员变量，必须考虑是否为 `final`。
    7. 类成员方法只供类内部调用，必须是 `private`。
    8. 类成员方法只对继承类公开，那么限制为 `protected`。
```java
/* 
  任何类、方法、参数、变量，严控访问范围。过于宽泛的访问范围，不利于模块解耦。 
  思考：如果是一个 private 的方法，想删除就删除，
  可是一个 public 的 service 方法，或者 一个 public 的成员变量，
  删除一下，不得手心冒点汗吗？
  变量像自己的小孩，尽量在自己的 视线内，变量作用域太大，如果无限制的到处跑，那么你会担心的。
*/
```
8. 关于`public` 和 `private`
    1. `public`里面 做业务逻辑
    2. `private`里面 做功能 和具体实现

>>>[**<p align="right">>>返回目录<<</p>**](#目录)

## 六、注释规范
1. **文件注释**
>    - 作者 `author`
>    - 描述 `description`
>    - 日期 `date`
```java
/**
  * @Author: wangshuai
  * @Description: 注释说明
  * @Date: Created in 10:55 2018/4/14
*/
 ```
2. **方法注释**（用多行注释）
>    - 作者 `author`
>    - 日期 `date`
>    - 功能描述 `information`
>    - 修改日期 `update`
>    - 修改目的 
 ```java
/**
  * @Author: wangshuai
  * @Date: Created in 10:55 2018/4/14
  * @Description: 功能
  * @param 参数1 String
  * @param 参数2 Int
*/
 ```
3. **单行注释** 
>    - 方法内的注释可以使用单行注释 
>    - 实体 `swagger` 注释
>    - controller层 `swagger` 注释

>>>[**<p align="right">>>返回目录<<</p>**](#目录)

## 七、测试接口文档规范
1. **功能描述**：
    1. `简洁清晰`的描述接口功能【例如：接口获取的信息包括哪些】；
2. **接口参数说明**：
    1. 每个参数与实际调用必须`保持一致`，包括大小写；
    2. `参数的含义`言简意赅的说明，含参数格式；
    3. `说明`部分，说明参数值需要哪里提供，参数是否为必填（或可选）；
    4. 详细说明参数怎么生成的【例如：时间戳，是哪个时间段的】；
3. **返回值说明**：
    1. 最好有一个模板`返回值`，并说明每个返回参数的意义；
    2. 提供一个真实的调用接口，真实的返回值；
4. **调用限制**，**安全方面**：
    1. `加密方式`，或者自己公司一个特殊的加密过程，只要双方采用一致的加密算法就可以调用接口，保证了接口调用的安全性，【例如：常见的md5】

>>>[**<p align="right">>>返回目录<<</p>**](#目录)

## 八、其他说明
1. 建议经常使用`代码格式化`功能（IDEA快捷键Ctrl+Alt+L）。
2. **禁止**使用魔法值，**酌情**使用常量或枚举。
3. 对 long 类型赋值时建议使用大写`L`，`l`（小写L）容易和数字`1`混淆。
4. 在使用事务注解时必须制定`rollbackFor`或`手动回滚`。

>>>[**<p align="right">>>返回目录<<</p>**](#目录)
