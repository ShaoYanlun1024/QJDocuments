# 后端代码审查清单

| 整理 | 版本 | 日期       | 描述                                      |
| ---- | ---- | ---------- | ----------------------------------------- |
| 孙靖武 | 0.0.1  | 2019.06.12 | 初稿 |



#### 命名
1. 变量命名明确易懂，语义表达完整。
2. 集合类变量以List、Set、Map结尾。
3. 变量不以 is 为前缀。部分框架（如RPC）会引起序列化错误。
4. 命名符合相关规范，如常量必须大写单词下划线分割，变量驼峰样式，接口 I 开头、实现类impl结尾等，包名全部小写。
5. 方法名与方法实际功能相符，见名知意，语义表达完整。
6. 用到常量的地方，定义常量类或枚举，代码里尽量避免直接写字符串数值等魔法值。

#### BUG
1. 未处理的潜在异常，如空指针等。
2. 线程安全。
3. 有无逻辑错误。
4. 事务的使用是否正确。
5. 敏感信息不可传给前端，如验证码、用户密码、非对称加密的私钥等。
6. 查询结果数据量大的需要分页。

#### 注释
1. 完整的注释。如方法注释 /** 格式、方法说明，入参返回值含义描述清晰明确易懂。
2. 实体类属性要有注释，说明业务中的具体含义。
3. if 判断注释业务逻辑以及true/false时分别做哪些处理。
 
#### 单元测试
1. 单元测试符合规范。
2. 测试类命名以被测试类名称开始，Test结尾。
3. 单元测试具有可重复性。

#### 接口
1. 接口符合规范，如Swagger注释完整。
2. 与前端交互的实体类不要有多余的字段。不同接口入参返回值实体类尽量不共用。
3. 返回值符合规范，不可以给前端返回Map、Object等不明确的类型。
4. 禁止将数据库实体类直接返回给前端，即使字段完全一样。 
5. 接口过时必须加 @Deprecated ，并清晰的说明替代的新接口是什么。

#### 设计原则 
1. 方法功能单一，尽量一个方法只做一件事。
2. 嵌套的if/for循环尽量不超过三层，过多的嵌套不利于理解和维护。

#### OOP 面向对象
1. 所有POJO类属性必须使用包装数据类型。
2. RPC方法的返回值和参数必须使用包装数据类型。
3. 建议所有局部变量使用基本数据类型。
4. 所有的相同类型的包装类对象之间值的比较，必须使用 equals 方法比较。

#### [数据库](https://git.allhome.com.cn/NetWorksDatas/Public/standard/blob/master/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E8%A7%84%E8%8C%83.md)
1. 字段命名是否规范
2. 字段必须设置非null缺省值
3. 索引使用是否合理
1. 不要使用 count（列名）或count（常量）代替count(\*)。count(\*) 是 SQL92 标准统计行数语法，跟数据库无关，跟null和非null无关。

> 包含开发规范