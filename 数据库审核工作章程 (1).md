# 数据库审核工作章程

| 整理 | 版本 | 日期       | 描述                                      |
| ---- | ---- | ---------- | ----------------------------------------- |
| 孙靖武 | 0.0.1  | 2019.11.28 | 初稿 |

## 目的
为了将团队现有规范落地，并减少人工审核的工作量及不可控性，提升线上数据库性能；在数据库变更和处理流程、数据库表设计、SQL编写等方面予以规范，为公司业务系统稳定、健康地运行提供保障。利用[数据库审核平台](https://sql.allhome.com.cn/login/)，制定数据库审核章程。

## 审核内容
- DDL(数据定义语言) create,alter,drop,
 - 数据库名称
 - 表结构设计
 - 字段数据类型优化
 - 索引设计
 - 字符集

- DML(数据操作语言) insert,update,delete
 - 字段赋值
 - WHERE子句
 - 事务

- DQL(数据查询语言) select
 - 避免select * 
 - WHERE子句
 - join表个数
 - 分页查询

> DDL审核内容，在提交审核工单时即可根据审核规则进行检测。  
> DML,DQL审核内容，会通过采集的慢查询日志分析，发现问题、分析问题、解决问题。

## 审核、优化流程
- 对象审核（DDL）通过审核平台提交工单。
- 非对象审核（DML,DQL）
 - 定期采集、分析慢查询日志，每月形成数据库质量报告。
 - 根据数据库质量报告，发现问题并通知开发人员。
 - 开发人员分析问题原因，制定实施方案，改进问题。
 - 通过对比次月数据库质量报告，检查问题是否解决。


## 惩罚
- 质量问题严重的，视情况（数据库规范发布后）
- 质量问题长时间未解决的